---
title: "2 - Probability theory and statistics review"
output: 
  html_notebook:
    toc: yes
---

# Basic probability theory

```{r setup}
knitr::opts_chunk$set(include = FALSE)
suppressPackageStartupMessages(library(tidyverse))
```

Lets begin with some definitions.

* **Random process**: A process that, when repeated multiple times, can lead to different outcomes. Can be _discrete_ or _continuous_.

* **Sample space**: Set of all possible outcomes a random process can have.

* **Logical independence**: Two events that can not affect one another.

* **Statistical independence**: Two events $A$ and $B$ are statistically independent if $Pr(A|B) = Pr(A)$.

>> Question: We draw an Ace from a deck of 52 cards then reshuffle the deck. What is the probability that our second draw is an Ace? 

Note that we are sampling with replacement in this question. The two events are statistically independent.
$$
Pr(C_2 = Ace | C_1 = Ace) = Pr(C_2 = Ace) = \frac{Count(Ace)}{SampleSpace} = \frac{4}{52} = .077
$$


* **Joint probability**: For independent events, calculating joint probabilities is to multiply the marginal probabilities: $Pr(A, B) = Pr(A)Pr(B)$. For example: $Pr(heads, heads, heads) = (.5)^3$.


>> Question: What is the probability of rolling a 7 using two dice, and is it the same as the probability of rolling a 3?

```{r}
# Enumerate every possible outcome
df <- crossing(D1 = 1:6, D2 = 1:6) %>% 
  mutate(outcome = D1 + D2)

df_solution <- tibble(
  # How many ways can we get 7
  "Pr(outcome = 7)" = df %>% 
    filter(outcome == 7) %>% 
    nrow(),
  # How many ways can we get 3
  "Pr(outcome = 3)" = df %>% 
    filter(outcome == 3) %>% 
    nrow()) %>% 
  # Divide by total number of outcomes
  magrittr::divide_by(nrow(df))

pander::pandoc.table(df_solution)
```

* Set theory can often be tought of in terms of venn diagrams.$Pr(A, B) = Pr(A) + Pr(B) - Pr(A \cap B)$

* **Conditional probabilitiy**: In a world where A has occurred, what is the probability B will also occur? $Prob(A|B) = \frac{Pr(A, B)}{Pr(B)}$

$$
Pr(B|A) = \frac{Pr(A,B)}{Pr(A)}
$$

>> Question: What is the probability of rolling a 6 in dice 2, give that you rolled a 2 in dice 1?

```{r}
nrow(filter(df, D1 == 2 & D2 == 6)) / 
  nrow(filter(df, D1 == 2))
```

* **Naive Bayes Rule**: $Pr(A|B) = \frac{Pr(B|A)Pr(A)}{Pr(B)}$


# Monty hall example

Monty hall presents thee doors. Two have goats behind them, one has a million dollars behind them. Lets start by enumerating all the possible states these doors can take.

```{r}
df_possibilities <- combinat::permn(c(d1 = "g", d2 = "g", d3 = "m")) %>% 
  reduce(rbind) %>% 
  as_tibble

df_possibilities
```

Now, lets say we open d1. Monty then opens d2 to reveal a goat. Whats the likelihood that d1 has a million dollars given what we know? What is the likelihood that d3 has a million dollars given what we know? Well we made the decision to open door 1 before anything was revealed. The probability that `d1 == M` is $\frac{1}{3}$.
```{r}
df_possibilities %>% 
  filter(d1 == "m") %>% 
  tally %>% 
  magrittr::divide_by(nrow(df_possibilities))
```

Monty doesn't reveal doors willy nilly. Hes playing for keeps. So he only reveals door i if it doesn't have a million dollars behind it. Lets refer to the revelation event as B. Lets suppose he revelas door 2 ($b_2$)

$$
\begin{align}
Pr(d_3 | b_2) =& \frac{Pr(b_2 | d_3) \times Pr(d_3)}{Pr(b_2)} 
\\ = & \frac{Pr(b_2 | d_3) \times Pr(d_3)}{Pr(b_2|d_1)Pr(d_1) + Pr(b_2|d_2)Pr(d_2) + Pr(b_2|d_3)Pr(d_3)} 
\\ = & \frac {1 \times \frac{1}{3}} {1 \times \frac{1}{3} + 0 \times \frac{1}{3} + \frac{1}{2} \times \frac{1}{3}}
\\ = & \frac{2}{3}
\end{align}
$$


# Exercises
